<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Couple</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@19.2.3",
        "react-dom/client": "https://esm.sh/react-dom@19.2.3/client",
        "lucide-react": "https://esm.sh/lucide-react@0.562.0"
      }
    }
    </script>
</head>
<body class="bg-gray-50 text-slate-800">
    <div id="root"></div>

    <script type="module">
        import React, { useState } from 'react';
        import ReactDOM from 'react-dom/client';
        import { Heart, Wallet, Calendar, Star, Info, Plus } from 'lucide-react';

        // --- DATA FROM YOUR UPLOADED FILES ---
        const initialSettings = {
            p1Name: 'Jean', p2Name: 'Monique',
            p1Income: 2500, p2Income: 2200,
            p1Points: 45, p2Points: 30,
            chores: [
                { id: 'c1', title: 'Sortir les poubelles', points: 10 },
                { id: 'c3', title: 'Nettoyer les toilettes', points: 50 },
                { id: 'c6', title: 'Ménage complet', points: 80 }
            ]
        };

        function App() {
            const [activeTab, setActiveTab] = useState('home');
            const [points, setPoints] = useState({ p1: initialSettings.p1Points, p2: initialSettings.p2Points });

            // Financial Logic: Calculate % based on income
            const totalIncome = initialSettings.p1Income + initialSettings.p2Income;
            const p1Share = (initialSettings.p1Income / totalIncome * 100).toFixed(0);
            const p2Share = (initialSettings.p2Income / totalIncome * 100).toFixed(0);

            const renderHome = () => React.createElement('div', { className: 'space-y-4' }, [
                React.createElement('h2', { className: 'text-2xl font-serif text-amber-600 mb-4' }, `Bonjour, ${initialSettings.p1Name} & ${initialSettings.p2Name}`),
                React.createElement('div', { className: 'bg-white p-4 rounded-xl shadow-sm border' }, [
                    React.createElement('p', { className: 'text-sm text-gray-500' }, 'Répartition Équitable (Prorata)'),
                    React.createElement('div', { className: 'flex justify-between mt-2 font-bold' }, [
                        React.createElement('span', null, `${initialSettings.p1Name}: ${p1Share}%`),
                        React.createElement('span', null, `${initialSettings.p2Name}: ${p2Share}%`)
                    ])
                ])
            ]);

            const renderSpending = () => React.createElement('div', { className: 'space-y-4' }, [
                React.createElement('h2', { className: 'text-xl font-bold' }, 'Finances Partagées'),
                React.createElement('div', { className: 'bg-blue-50 p-4 rounded-lg' }, 
                    `Sur un budget de 1000€, Jean paie ${(1000 * (p1Share/100)).toFixed(0)}€ et Monique ${(1000 * (p2Share/100)).toFixed(0)}€.`
                )
            ]);

            const renderShare = () => React.createElement('div', { className: 'space-y-4' }, [
                React.createElement('h2', { className: 'text-xl font-bold' }, 'Système Fair Share'),
                initialSettings.chores.map(chore => 
                    React.createElement('div', { key: chore.id, className: 'flex justify-between items-center bg-white p-3 rounded-lg border' }, [
                        React.createElement('span', null, chore.title),
                        React.createElement('button', { 
                            onClick: () => setPoints(prev => ({...prev, p1: prev.p1 + chore.points})),
                            className: 'bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-xs font-bold'
                        }, `+${chore.points} pts`)
                    ])
                )
            ]);

            return React.createElement('div', { className: 'max-w-md mx-auto min-h-screen pb-20' }, [
                React.createElement('header', { className: 'h-16 flex items-center justify-center border-b bg-white' }, 
                    React.createElement('span', { className: 'font-serif tracking-widest text-amber-600' }, 'SMART COUPLE')
                ),
                React.createElement('main', { className: 'p-4' }, [
                    activeTab === 'home' && renderHome(),
                    activeTab === 'spending' && renderSpending(),
                    activeTab === 'share' && renderShare()
                ]),
                React.createElement('nav', { className: 'fixed bottom-0 left-0 right-0 bg-white border-t h-16 flex justify-around items-center' }, [
                    {id: 'home', icon: Heart}, {id: 'spending', icon: Wallet}, {id: 'share', icon: Star}
                ].map(tab => 
                    React.createElement('button', { 
                        onClick: () => setActiveTab(tab.id),
                        className: `p-2 ${activeTab === tab.id ? 'text-amber-600' : 'text-gray-400'}`
                    }, React.createElement(tab.icon, { size: 24 }))
                ))
            ]);
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
